export default class Validator{constructor(e,t,s,a){this.settings={elements:{},rules:{},messages:{},errorPlacement:!1,invalidHandler:!1},this.messages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",integer:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",rangelength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}."},this.methods={required:(e,t,s)=>e.length>0,minlength:(e,t,s)=>e.length<this.settings.rules[t.id].maxlength,maxlength:(e,t,s)=>e.length>this.settings.rules[t.id].maxlength,min:(e,t,s)=>e>=s,max:(e,t,s)=>e<=s,integer:(e,t,s)=>/^\d+$/.test(e),number:(e,t,s)=>/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e),rangelength:(e,t,s)=>{const a=Array.isArray(e)?this.constructor.getLength(e,t):e.length;return a>=s[0]&&a<=s[1]},range:(e,t,s)=>e>=s[0]&&e<=s[1],equalTo:(e,t,s)=>{const a=document.querySelector(s);return a&&e===a.value},url:(e,t,s)=>/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e),email:(e,t,s)=>/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},arguments[0]&&"object"==typeof arguments[0]&&(this.settings=this.constructor.extendDefaults(this.settings,arguments[0])),this.settings.elements=this.constructor.setFormElements.call(this,this.settings.rules)}validate(e){if(!e)return!0;const t="form"===e.tagName.toLowerCase();if(!t&&void 0===this.settings.rules[e.id])return!0;if(e.hidden||"hidden"===e.style.visibility||e.disabled||e.readOnly)return!0;const s=[];return t?this.settings.elements.forEach(e=>{s.push(this.verify(e))}):s.push(this.verify(e)),-1===s.indexOf(!1)}addMethod(e,t,s){"undefined"!==t&&(this.methods[e]=t)}static setFormElements(e){const t=[];return Object.keys(e).forEach(e=>{const s=document.querySelector(`#${e}`);s&&t.push(s)}),t}verify(e){const t=this.settings.rules[e.id],s=[];return Object.keys(t).forEach(a=>{const r=t[a],n=this.methods[a];if(void 0!==n){if(!n.call(this,e.value,e,r)){if(this.settings.errorPlacement){let t;this.messages[a]?t=this.constructor.format(this.messages[a],r):this.settings.messages[e.id][a]&&(t=this.settings.messages[e.id][a]),this.settings.errorPlacement.call(this,t,e)}s.push(!1)}}}),-1===s.indexOf(!1)}static getLength(e,t){return"select"===t.tagName.toLowerCase()?t.options[t.selectedIndex].value.length:e.length}static format(e,t){let s=e;return s.match(/\{([0-9]+)\}/g)&&[].slice.call(t).forEach((e,t)=>{s=s.replace(new RegExp(`\\{${t}\\}`,"g"),e)}),s}static extendDefaults(e,t){const s=e;return Object.keys(t).forEach(e=>{s[e]=t[e]}),s}}