"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var Validator=function(){function e(t,n,r,a){var s=this;_classCallCheck(this,e),this.settings={elements:{},rules:{},messages:{},errorPlacement:!1,invalidHandler:!1},this.messages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",number:"Please enter a valid number.",integer:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:"Please enter no more than {0} characters.",minlength:"Please enter at least {0} characters.",rangelength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}."},this.methods={required:function(e,t,n){return e.length>0},minlength:function(e,t,n){return e.length<s.settings.rules[t.id].maxlength},maxlength:function(e,t,n){return e.length>s.settings.rules[t.id].maxlength},min:function(e,t,n){return e>=n},max:function(e,t,n){return e<=n},integer:function(e,t,n){return/^\d+$/.test(e)},number:function(e,t,n){return/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},rangelength:function(e,t,n){var r=Array.isArray(e)?s.constructor.getLength(e,t):e.length;return r>=n[0]&&r<=n[1]},range:function(e,t,n){return e>=n[0]&&e<=n[1]},equalTo:function(e,t,n){var r=document.querySelector(n);return r&&e===r.value},url:function(e,t,n){return/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u00a1-\uffff][a-z0-9\u00a1-\uffff_-]{0,62})?[a-z0-9\u00a1-\uffff]\.)+(?:[a-z\u00a1-\uffff]{2,}\.?))(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},email:function(e,t,n){return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)}},arguments[0]&&"object"===_typeof(arguments[0])&&(this.settings=this.constructor.extendDefaults(this.settings,arguments[0])),this.settings.elements=this.constructor.setFormElements.call(this,this.settings.rules)}return _createClass(e,[{key:"validate",value:function(e){var t=this;if(!e)return!0;var n="form"===e.tagName.toLowerCase();if(!n&&void 0===this.settings.rules[e.id])return!0;if(e.hidden||"hidden"===e.style.visibility||e.disabled||e.readOnly)return!0;var r=[];return n?this.settings.elements.forEach(function(e){r.push(t.verify(e))}):r.push(this.verify(e)),-1===r.indexOf(!1)}},{key:"addMethod",value:function(e,t,n){"undefined"!==t&&(this.methods[e]=t)}},{key:"verify",value:function(e){var t=this,n=this.settings.rules[e.id],r=[];return Object.keys(n).forEach(function(a){var s=n[a],i=t.methods[a];if(void 0!==i&&!i.call(t,e.value,e,s)){var u;if(t.settings.errorPlacement)t.messages[a]?u=t.constructor.format(t.messages[a],s):t.settings.messages[e.id][a]&&(u=t.settings.messages[e.id][a]),t.settings.errorPlacement.call(t,u,e);r.push(!1)}}),-1===r.indexOf(!1)}}],[{key:"setFormElements",value:function(e){var t=[];return Object.keys(e).forEach(function(e){var n=document.querySelector("#".concat(e));n&&t.push(n)}),t}},{key:"getLength",value:function(e,t){return"select"===t.tagName.toLowerCase()?t.options[t.selectedIndex].value.length:e.length}},{key:"format",value:function(e,t){var n=e;return n.match(/\{([0-9]+)\}/g)&&[].slice.call(t).forEach(function(e,t){n=n.replace(new RegExp("\\{".concat(t,"\\}"),"g"),e)}),n}},{key:"extendDefaults",value:function(e,t){var n=e;return Object.keys(t).forEach(function(e){n[e]=t[e]}),n}}]),e}();exports.default=Validator;